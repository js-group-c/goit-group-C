import{s as r,a as h,b as d,o as y,c as E}from"./assets/support-ukr-J0-nDD3z.js";import{i as f}from"./assets/vendor-C2dPOmMF.js";function _(){f.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const k="https://books-backend.p.goit.global/books/category-list";fetch(k).then(t=>t.json()).then(t=>{t.forEach(e=>{const o=`<li class="ctg"><a href="#" class='sideCat'>${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",o)})}).catch(function(t){console.log(t)});const s={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let m=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",v),document.addEventListener("click",w),document.addEventListener("click",C),window.addEventListener("scroll",u)});document.addEventListener("DOMContentLoaded",async function(){r(s.titleElement),s.topListElem.innerHTML="";const e=await h();let o="";e.forEach(n=>{o+=b(n)}),s.topListElem.innerHTML=o,d()});function b(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${T(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function T(t){let e=1;const o=t.filter(i=>i.book_image),n=[];for(let i=0;i<o.length;i++)n.push(o[i]);for(;n.length<5;)n.push(o[n.length%o.length]);const L=n.map(i=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${i._id}">
                <img class="top_list-book_cover" src="${i.book_image}" alt="${i.title}">
            <p class="top_list-quick">QUICK VIEW</p>
                </div>
            
            <h3 class="top_list-book_title">${i.title}</h3>
            <p class="top_list-book_author">${i.author}</p>
        </li>
        `).join("");return e++,L}const w=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const o=e.dataset.bookid;y(o)}},v=function(t){if(t.target.classList.contains("top_list-see_more")){s.topListElem.classList.add("hidden"),s.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;p(e),c(e),a(e)}},C=async function(t){if(t.target.classList.contains("all-categories")&&(s.titleElement.innerHTML="Best Sellers <span>Books</span>",s.categoryListElem.classList.add("hidden"),s.topListElem.classList.remove("hidden"),a("All categories")),t.target.classList.contains("sideCat")){const e=t.target.textContent.trim();p(e),s.categoryListElem.classList.remove("hidden"),s.topListElem.classList.add("hidden"),a(e),await c(e),r(s.categoryListElem);try{await c(e)}finally{d()}}};async function c(t){try{r(s.titleElement),s.categoryListElem.innerHTML="";const e=await E(t);let o="";e.forEach(n=>{n.book_image&&(o+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${n._id}">
                  <img class="top_list-book_cover" src="${n.book_image}" alt="${n.title}">
              </div>
              <h3 class="top_list-book_title">${n.title}</h3>
              <p class="top_list-book_author">${n.author}</p>
          </li>
          `)}),o+='<p class="all_categories"</p>',s.categoryListElem.innerHTML=o}catch(e){console.error("Kategori verisi alınırken hata oluştu:",e),s.categoryListElem.innerHTML="<p>Kitaplar yüklenirken bir hata oluştu.</p>"}finally{d()}}function p(t){s.titleElement.innerHTML="";const e=t.split(" ");if(e.length===1){s.titleElement.textContent=t;return}const o=e.pop();s.titleElement.textContent=e.join(" ");const n=document.createElement("span");n.textContent=" "+o,s.titleElement.appendChild(n)}function a(t){document.querySelectorAll(".ctg").forEach(o=>{o.textContent.trim().toLowerCase()===t.toLowerCase()?o.classList.add("active"):o.classList.remove("active")})}function u(){const t=document.querySelector(".all_categories");if(t){const e=t.getBoundingClientRect(),o=window.innerHeight;e.top<o&&!m&&s.topListElem.classList.contains("hidden")&&(_(),m=!0)}}let l;window.addEventListener("scroll",function(){l&&clearTimeout(l),l=setTimeout(function(){u()},300)});const g=document.getElementById("scrollToTopBtn");document.body.scrollTop=0;document.documentElement.scrollTop=0;g.addEventListener("click",$);window.addEventListener("scroll",B);function B(){document.body.scrollTop>20||document.documentElement.scrollTop>20?(document.getElementById("scrollToTopBtn").style.display="block",g.classList.remove("btnHidden")):document.getElementById("scrollToTopBtn").style.display="none"}function $(){window.scrollTo({top:0,behavior:"smooth"})}
//# sourceMappingURL=index.js.map
