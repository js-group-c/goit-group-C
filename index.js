import{a as p,S as _,i as v}from"./assets/vendor-7_o5VXWO.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const l of i.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=o(s);fetch(s.href,i)}})();const B="https://books-backend.p.goit.global/books/category-list";fetch(B).then(t=>t.json()).then(t=>{t.forEach(e=>{const o=`<li class="ctg"><a href="./">${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",o)})}).catch(function(t){console.log(t)});const m="https://books-backend.p.goit.global",g=["/books/category-list","/books/top-books","/books/category","/books"];async function w(){const t=`${m}${g[1]}`;try{return(await p.get(t)).data}catch(e){throw console.error("Error fetching top books: ",e),e}}async function $(t){const e=`${m}${g[2]}`,o={category:t};try{return(await p.get(e,{params:o})).data}catch(n){throw console.error("Error fetching books by category: ",n),n}}async function S(t){try{const e=[];for(id of t){const o=`${m}${g[3]}/${id}`,n=await p.get(o);e.push(n.data)}return e}catch(e){throw console.error("Error fetching books by IDs: ",e),e}}var a=document.getElementById("login-modal"),d=document.getElementById("btn-sign-up"),C=document.getElementsByClassName("close-modal")[0],M=document.getElementsByClassName("submit-button")[0],u=document.getElementsByClassName("hmbrgr")[0];d.addEventListener("click",d.onclick);u.addEventListener("click",u.onclick);M.addEventListener("click",T);d.onclick=function(){a.style.display="flex"};u.onclick=function(){a.style.display="flex"};C.onclick=function(){a.style.display="none"};window.onclick=function(t){t.target==a&&(a.style.display="none")};function T(){var t=document.getElementById("username").value,e=document.getElementById("email").value,o=document.getElementById("password").value;t&&e&&o?(alert("Signup Successful!"),a.style.display="none"):alert("Please fill out all fields.")}let I={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const h=new _(I),L=t=>{h.spin(t)},k=()=>{h.stop()};function H(){v.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const r={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let y=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",x),document.addEventListener("click",A),document.addEventListener("click",q),window.addEventListener("scroll",E)});document.addEventListener("DOMContentLoaded",async function(){L(r.titleElement),r.topListElem.innerHTML="";const e=await w();let o="";e.forEach(n=>{o+=O(n)}),r.topListElem.innerHTML=o,k()});function O(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${N(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function N(t){let e=1;const o=t.map(n=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${n._id}">
                <img class="top_list-book_cover" src="${n.book_image}" alt="${n.title}">
            </div>
            <h3 class="top_list-book_title">${n.title}</h3>
            <p class="top_list-book_author">${n.author}</p>
        </li>
        `).join("");return e++,o}const A=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const o=e.dataset.bookid;onOpenModal(o)}},x=function(t){if(t.target.classList.contains("top_list-see_more")){r.topListElem.classList.add("hidden"),r.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;P(e),D(e),allCategoriesActive(e)}},q=async function(t){t.target.classList.contains("all_categories")&&(r.titleElement.innerHTML="Best Sellers <span>Books</span>",r.categoryListElem.classList.add("hidden"),r.topListElem.classList.remove("hidden"),allCategoriesActive("All categories")),t.target.classList.contains("link")&&(r.titleElement.innerHTML="Best Sellers <span>Books</span>",r.categoryListElem.classList.add("hidden"),r.topListElem.classList.remove("hidden"))};async function D(t){try{L(r.titleElement),r.categoryListElem.innerHTML="";const e=await $(t);let o="";e.forEach(n=>{o+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${n._id}">
                  <img class="top_list-book_cover" src="${n.book_image}" alt="${n.title}">
              </div>
              <h3 class="top_list-book_title">${n.title}</h3>
              <p class="top_list-book_author">${n.author}</p>
          </li>
          `}),o+='<li><button class="all_categories">All Categories</button></li>',r.categoryListElem.innerHTML=o}catch(e){console.error("Kategori verisi alÄ±nÄ±rken hata oluÅŸtu:",e),r.categoryListElem.innerHTML="<p>Kitaplar yÃ¼klenirken bir hata oluÅŸtu.</p>"}finally{k()}}function P(t){r.titleElement.innerHTML="";const e=t.split(" ");if(e.length===1){r.titleElement.textContent=t;return}const o=e.pop();r.titleElement.textContent=e.join(" ");const n=document.createElement("span");n.textContent=" "+o,r.titleElement.appendChild(n)}function E(){const t=document.querySelector(".all_categories");if(t){const e=t.getBoundingClientRect(),o=window.innerHeight;e.top<o&&!y&&r.topListElem.classList.contains("hidden")&&(H(),y=!0)}}let c;window.addEventListener("scroll",function(){c&&clearTimeout(c),c=setTimeout(function(){E()},300)});document.addEventListener("DOMContentLoaded",function(){fetch("../partials/header.html").then(t=>t.text()).then(t=>{document.getElementById("header-placeholder").innerHTML=t}).catch(t=>console.error("Header yÃ¼klenirken hata oluÅŸtu:",t)),fetch("../partials/support-ukr.html").then(t=>t.text()).then(t=>{document.getElementById("support-ukr-placeholder").innerHTML=t}).catch(t=>console.error("Support-ukr yÃ¼klenirken hata oluÅŸtu:",t))});const j=JSON.parse(localStorage.getItem("shoppingList"))||[];async function b(){const t=JSON.parse(localStorage.getItem("shoppingList"))||[],e=document.getElementById("books-container"),o=document.querySelector(".empty-list");if(t.length===0){o.style.display="block",e.innerHTML="";return}else o.style.display="none";e.innerHTML="";try{(await S(t)).forEach(s=>{const i=document.createElement("div");i.classList.add("book-card"),i.innerHTML=`
          <img src="${s.book_image}" alt="${s.title}" class="book-cover">
          <div class="book-info">
            <h3>${s.title}</h3>
            <p class="category">${s.list_name}</p>
            <p class="description">${s.description}</p>
            <p class="author">By: ${s.author}</p>
            <a href="${s.buy_links[0].url}" target="_blank" class="buy-button">Buy</a>
            <button class="delete-btn" data-id="${s._id}">ðŸ—‘ Remove</button>
          </div>
        `,e.appendChild(i)})}catch(n){console.error("Error",n)}}document.addEventListener("DOMContentLoaded",b);document.getElementById("books-container").addEventListener("click",function(t){if(t.target.classList.contains("delete-btn")){const e=t.target.dataset.id;let o=JSON.parse(localStorage.getItem("shoppingList"))||[];o=o.filter(n=>n!==e),localStorage.setItem("shoppingList",JSON.stringify(o)),b()}});const f=document.querySelector(".pagination");j.length===0?f.style.display="none":f.style.display="flex";
//# sourceMappingURL=index.js.map
