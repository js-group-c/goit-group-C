import{a as K,S as te,i as oe}from"./assets/vendor-C2dPOmMF.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&l(c)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function l(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const le="https://books-backend.p.goit.global/books/category-list";fetch(le).then(t=>t.json()).then(t=>{t.forEach(e=>{const o=`<li class="ctg"><a href="#" class='sideCat'>${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",o)})}).catch(function(t){console.log(t)});const z="https://books-backend.p.goit.global",J=["/books/category-list","/books/top-books","/books/category","/books"];async function ne(){const t=`${z}${J[1]}`;try{return(await K.get(t)).data}catch(e){throw console.error("Error fetching top books: ",e),e}}async function se(t){const e=`${z}${J[2]}`,o={category:t};try{return(await K.get(e,{params:o})).data}catch(l){throw console.error("Error fetching books by category: ",l),l}}const f=document.getElementById("bookModal"),re=document.querySelector(".close"),ie=document.querySelector(".modalImage"),T=document.querySelector(".modalTitle"),x=document.querySelector(".modalAuthor"),I=document.querySelector(".modalDescription"),ce=document.querySelector(".modalBuyLinks"),u=document.querySelector(".addToShoppingList"),y=document.querySelector(".removeFromShoppingList"),W=document.querySelector(".feedback-div"),G=document.querySelector(".feedback-text"),g=document.querySelector(".modal-content"),R=document.querySelector(".close");let d=JSON.parse(localStorage.getItem("shoppingList"))||[],h=null;const ae={Amazon:"../img/png/Amazon_logo.png","Apple Books":"../img/png/apple-books.png","Barnes and Noble":"../img/png/barnes-noblepng.png","Books-A-Million":"../img/png//books-a-million.png",Bookshop:"../img/png/bookshop.png",IndieBound:"../img/png/indie-bound.png"};async function de(t){h=t;try{const e=await ue(t);e&&(ie.src=e.book_image,T.textContent=e.title,x.textContent=`Yazar: ${e.author}`,I.textContent=e.description||"Açıklama mevcut değil.",ce.innerHTML=e.buy_links.map(o=>{const l=ae[o.name]||"./images/default-logo.png";return`<li><a href="${o.url}" target="_blank"><img src="${l}" alt="${o.name}" style="width: 40px; height: auto; margin-right: 10px;"></a></li>`}).join("")),M(t),f.style.display="block",document.body.style.overflow="hidden",document.body.classList.contains("dark-mode")&&Q()}catch(e){console.error("Kitap bilgileri yüklenirken hata oluştu:",e)}}async function ue(t){try{const e=await fetch(`https://books-backend.p.goit.global/books/${t}`);if(!e.ok)throw new Error("Kitap bilgisi getirilemedi.");return await e.json()}catch(e){return console.error("API hatası:",e),null}}function M(t){d.includes(t)?(u.style.display="none",y.style.display="block"):(u.style.display="block",y.style.display="none")}u.addEventListener("click",()=>{d.includes(h)||(d.push(h),localStorage.setItem("shoppingList",JSON.stringify(d))),M(h),W.style.display="block"});y.addEventListener("click",()=>{d=d.filter(t=>t!==h),localStorage.setItem("shoppingList",JSON.stringify(d)),M(h),W.style.display="none"});re.addEventListener("click",()=>{f.style.display="none",document.body.style.overflow="visible"});window.addEventListener("click",t=>{t.target===f&&(f.style.display="none",document.body.style.overflow="visible")});document.addEventListener("keydown",function(t){t.key==="Escape"&&(f.style.display="none",document.body.style.overflow="visible")});function Q(){g.style.background="black",g.style.color="white",g.style.border="1px solid white",T.style.color="white",x.style.color="white",I.style.color="white",R.style.color="white",G.style.color="white",u.style.background="black",u.style.color="white",y.style.background="black",y.style.color="white"}function ye(){g.style.background="",g.style.color="",g.style.border="",T.style.color="",x.style.color="",I.style.color="",R.style.color="",G.style.color="",u.style.background="",u.style.color="",y.style.background="",y.style.color=""}var m=document.getElementById("login-modal"),v=document.getElementById("btn-sign-up"),me=document.querySelector("svg.btn-sign-up"),pe=document.getElementsByClassName("close-modal")[0],ge=document.getElementsByClassName("submit-button")[0],E=document.getElementsByClassName("hmbrgr")[0],he=document.querySelector("div.right-container > a.switcher-2"),q=document.querySelector("#window-sign-in"),_=document.querySelector("#window-sign-up"),S=document.querySelector("a#btn-sign-up"),L=document.querySelector("a#btn-sign-out");const A=function(){m.style.display="flex"};v.addEventListener("click",A);E.addEventListener("click",E.onclick);ge.addEventListener("click",ve);he.addEventListener("click",fe);q.addEventListener("click",q.onclick);_.addEventListener("click",_.onclick);L.addEventListener("click",ke);E.onclick=function(){m.style.display="flex"};pe.onclick=function(){m.style.display="none"};window.onclick=function(t){t.target==m&&(m.style.display="none")};q.onclick=function(){var t=document.querySelector("#username"),e=document.querySelector("#window-sign-up"),o=document.querySelector("#window-sign-in"),l=document.querySelector("button.submit-button");t.style.display="none",e.style.textDecoration="none",e.style.color="#111111",o.style.textDecoration="underline",o.style.color="var(--violet)",l.textContent="SIGN IN"};_.onclick=function(){var t=document.querySelector("#username"),e=document.querySelector("#window-sign-up"),o=document.querySelector("#window-sign-in"),l=document.querySelector("button.submit-button");t.style.display="",e.style.textDecoration="underline",e.style.color="var(--violet)",o.style.textDecoration="none",o.style.color="#111111",l.textContent="SIGN UP"};function ve(){var t=document.getElementById("username").value,e=document.getElementById("email").value,o=document.getElementById("password").value,l=document.querySelector("button.submit-button"),s=document.querySelector("form#sign-up-form");const n=JSON.parse(localStorage.getItem("users"))||[];if(l.textContent==="SIGN UP")if(!t||!e||!o){alert("Please fill out all fields.");return}else n.push({username:t,email:e,password:o}),localStorage.setItem("users",JSON.stringify(n)),alert("Signup Successful!"),m.style.display="none",s.reset();else{const c=n.find(a=>a.email===e);c==null||c.password!==o?alert("Password does not match or user does not exist!"):(alert("Signin successful!"),m.style.display="none",me.style.display="none",be(c.username),v.removeEventListener("click",A),v.addEventListener("click",V),s.reset())}}function fe(){var t=document.querySelector("svg.swicther-2-svg"),e=document.querySelector("header.header"),o=document.querySelector("svg.nav-logo-txt"),l=document.querySelector("svg.hmbrgr-menu"),s=document.querySelector("a.nav-link.shopping-list"),n=document.querySelector("svg.lock-02"),c=document.querySelector("body"),a=document.querySelectorAll("ul#categories > li.ctg"),p=document.querySelector(".top_list-title"),H=document.querySelectorAll(".top_list-book_title "),N=document.querySelectorAll(".top_list-see_more"),U=document.querySelector(".modal-signUp"),O=document.querySelectorAll(".login-form form input"),b=document.querySelector(".login-form button"),D=document.querySelectorAll("div.modal-window > a"),P=document.querySelector("div.close-modal");t.innerHTML.includes("Switcher-2@2x.svg#switcher2")?(Q(),t.innerHTML='<use href="../img/SwitcherDark@2x.svg#switcherDark"></use>',e.style.backgroundColor="var(--black)",e.style.border=" 1.5px solid #FFFFFF",o.style.filter="brightness(0) invert(1)",l.style.filter="brightness(0) invert(1)",s.style.color="var(--white)",n.style.filter="brightness(0) invert(1)",c.style.backgroundColor="var(--black)",c.classList.add("dark-mode"),a.forEach(r=>{r.style.color="#FFFFFF"}),p.style.color="var(--white)",H.forEach(r=>{r.style.color="var(--white)"}),N.forEach(r=>{r.style.color="var(--white)"}),U.style.backgroundColor="var(--black)",O.forEach(r=>{r.style.backgroundColor="var(--black)",r.classList.add("dark-mode")}),b.style.backgroundColor="var(--white)",b.style.color="var(--black)",D.forEach(r=>{r.style.color="var(--white)"}),P.style.color="var(--white)"):(ye(),t.innerHTML='<use href="../img/Switcher-2@2x.svg#switcher2"></use>',e.style.backgroundColor="var(--white)",e.style.border=" 1.5px solid #111111",o.style.filter="",l.style.filter="",s.style.color="var(--black)",n.style.filter="",c.style.backgroundColor="var(--white)",c.classList.remove("dark-mode"),a.forEach(r=>{r.style.color="#111111"}),p.style.color="var(--black)",H.forEach(r=>{r.style.color="var(--black)"}),N.forEach(r=>{r.style.color="var(--black)"}),U.style.backgroundColor="#F6F6F6",O.forEach(r=>{r.style.backgroundColor="#F6F6F6",r.classList.remove("dark-mode")}),b.style.backgroundColor="#111111",b.style.color="var(--white)",D.forEach(r=>{r.style.color="var(--black)"}),P.style.color="var(--black)")}function be(t){var e=`<div class='signed-in'><img src='/img/Stephen.png' width=37 height= 37 alt='Stephen'/>
                    <p>${t}</p>
                    <svg class="sign-out btn-sign-out" width="23" height="26">
                       <use href="img/drop-down.svg#drop-down"></use>
                    </svg>
                </div>`;S.insertAdjacentHTML("beforeend",e)}function V(){L.style.display="block",L.insertAdjacentElement("afterend",S)}function ke(){L.style.display="none",S.firstElementChild.style.display="flex",S.firstElementChild.nextElementSibling.style.display="none",v.style.display="flex",v.removeEventListener("click",V),v.addEventListener("click",A)}let Se={lines:12,length:30,width:15,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#EAC645",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const Y=new te(Se),$=t=>{Y.spin(t)},F=()=>{Y.stop()};function Le(){oe.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const i={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let j=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",_e),document.addEventListener("click",qe),document.addEventListener("click",Ce),window.addEventListener("scroll",Z)});document.addEventListener("DOMContentLoaded",async function(){$(i.titleElement),i.topListElem.innerHTML="";const e=await ne();let o="";e.forEach(l=>{o+=we(l)}),i.topListElem.innerHTML=o,F()});function we(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${Ee(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function Ee(t){let e=1;const o=t.filter(n=>n.book_image),l=[];for(let n=0;n<o.length;n++)l.push(o[n]);for(;l.length<5;)l.push(o[l.length%o.length]);const s=l.map(n=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${n._id}">
                <img class="top_list-book_cover" src="${n.book_image}" alt="${n.title}">
            <p class="top_list-quick">QUICK VIEW</p>
                </div>
            
            <h3 class="top_list-book_title">${n.title}</h3>
            <p class="top_list-book_author">${n.author}</p>
        </li>
        `).join("");return e++,s}const qe=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const o=e.dataset.bookid;de(o)}},_e=function(t){if(t.target.classList.contains("top_list-see_more")){i.topListElem.classList.add("hidden"),i.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;X(e),C(e),B(e)}},Ce=async function(t){if(t.target.classList.contains("all-categories")&&(i.titleElement.innerHTML="Best Sellers <span>Books</span>",i.categoryListElem.classList.add("hidden"),i.topListElem.classList.remove("hidden"),B("All categories")),t.target.classList.contains("sideCat")){const e=t.target.textContent.trim();X(e),i.categoryListElem.classList.remove("hidden"),i.topListElem.classList.add("hidden"),B(e),await C(e),$(i.categoryListElem);try{await C(e)}finally{F()}}};async function C(t){try{$(i.titleElement),i.categoryListElem.innerHTML="";const e=await se(t);let o="";e.forEach(l=>{l.book_image&&(o+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${l._id}">
                  <img class="top_list-book_cover" src="${l.book_image}" alt="${l.title}">
              </div>
              <h3 class="top_list-book_title">${l.title}</h3>
              <p class="top_list-book_author">${l.author}</p>
          </li>
          `)}),o+='<p class="all_categories"</p>',i.categoryListElem.innerHTML=o}catch(e){console.error("Kategori verisi alınırken hata oluştu:",e),i.categoryListElem.innerHTML="<p>Kitaplar yüklenirken bir hata oluştu.</p>"}finally{F()}}function X(t){i.titleElement.innerHTML="";const e=t.split(" ");if(e.length===1){i.titleElement.textContent=t;return}const o=e.pop();i.titleElement.textContent=e.join(" ");const l=document.createElement("span");l.textContent=" "+o,i.titleElement.appendChild(l)}function B(t){document.querySelectorAll(".ctg").forEach(o=>{o.textContent.trim().toLowerCase()===t.toLowerCase()?o.classList.add("active"):o.classList.remove("active")})}function Z(){const t=document.querySelector(".all_categories");if(t){const e=t.getBoundingClientRect(),o=window.innerHeight;e.top<o&&!j&&i.topListElem.classList.contains("hidden")&&(Le(),j=!0)}}let w;window.addEventListener("scroll",function(){w&&clearTimeout(w),w=setTimeout(function(){Z()},300)});const ee=document.getElementById("scrollToTopBtn");document.body.scrollTop=0;document.documentElement.scrollTop=0;ee.addEventListener("click",Te);window.addEventListener("scroll",Be);function Be(){document.body.scrollTop>20||document.documentElement.scrollTop>20?(document.getElementById("scrollToTopBtn").style.display="block",ee.classList.remove("btnHidden")):document.getElementById("scrollToTopBtn").style.display="none"}function Te(){window.scrollTo({top:0,behavior:"smooth"})}var xe=document.querySelector("div.support-ukr > div.slider-div"),k=document.getElementById("slider");xe.addEventListener("click",Ie);function Ie(){Ae(),Me()}function Me(){k.src.includes("/slider.svg#slider")?k.src="../img/blocks/sliderUp.svg#sliderUp":k.src="../img/blocks/slider.svg#slider"}function Ae(){if(k.src.includes("/slider.svg#slider")){var t=document.querySelector("ol.support-list > li:nth-child(1)"),e=document.querySelector("ol.support-list > li:nth-child(2)"),o=document.querySelector("ol.support-list > li:nth-child(3)");t.style.display="none",e.style.display="none",o.style.display="none";var l=document.querySelector("ol.support-list");l.style.counterSet="custom 3";var s=document.querySelector("ol.support-list > li:nth-child(7)"),n=document.querySelector("ol.support-list > li:nth-child(8)"),c=document.querySelector("ol.support-list > li:nth-child(9)");s.style.display="flex",n.style.display="flex",c.style.display="flex";var a=document.querySelectorAll("ol.support-list > li.last3 > a > img ");a.forEach(p=>p.style.position="relative"),a.forEach(p=>p.style.top="0px")}else{var t=document.querySelector("ol.support-list > li:nth-child(1)"),e=document.querySelector("ol.support-list > li:nth-child(2)"),o=document.querySelector("ol.support-list > li:nth-child(3)");t.style.display="",e.style.display="",o.style.display="";var l=document.querySelector("ol.support-list");l.style.counterSet="custom 1";var s=document.querySelector("ol.support-list > li:nth-child(7)"),n=document.querySelector("ol.support-list > li:nth-child(8)"),c=document.querySelector("ol.support-list > li:nth-child(9)");s.style.display="none",n.style.display="none",c.style.display="none"}}
//# sourceMappingURL=index.js.map
