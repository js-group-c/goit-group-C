import{a as B,S as K,i as J}from"./assets/vendor-C2dPOmMF.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const n of l)if(n.type==="childList")for(const c of n.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function o(l){const n={};return l.integrity&&(n.integrity=l.integrity),l.referrerPolicy&&(n.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?n.credentials="include":l.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(l){if(l.ep)return;l.ep=!0;const n=o(l);fetch(l.href,n)}})();const U="https://books-backend.p.goit.global/books/category-list";fetch(U).then(t=>t.json()).then(t=>{t.forEach(e=>{const o=`<li class="ctg"><a href="#" class='sideCat'>${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",o)})}).catch(function(t){console.log(t)});const q="https://books-backend.p.goit.global",T=["/books/category-list","/books/top-books","/books/category","/books"];async function R(){const t=`${q}${T[1]}`;try{return(await B.get(t)).data}catch(e){throw console.error("Error fetching top books: ",e),e}}async function W(t){const e=`${q}${T[2]}`,o={category:t};try{return(await B.get(e,{params:o})).data}catch(s){throw console.error("Error fetching books by category: ",s),s}}async function Q(t){try{const e=[];for(let o of t){const s=`${q}${T[3]}/${o}`,l=await B.get(s);e.push(l.data)}return e}catch(e){throw console.error("Error fetching books by IDs: ",e),e}}var y=document.getElementById("login-modal"),k=document.getElementById("btn-sign-up"),V=document.getElementsByClassName("close-modal")[0],Y=document.getElementsByClassName("submit-button")[0],L=document.getElementsByClassName("hmbrgr")[0],G=document.querySelector("div.right-container > a.switcher-2");k.addEventListener("click",k.onclick);L.addEventListener("click",L.onclick);Y.addEventListener("click",X);G.addEventListener("click",Z);k.onclick=function(){y.style.display="flex"};L.onclick=function(){y.style.display="flex"};V.onclick=function(){y.style.display="none"};window.onclick=function(t){t.target==y&&(y.style.display="none")};function X(){var t=document.getElementById("username").value,e=document.getElementById("email").value,o=document.getElementById("password").value;t&&e&&o?(alert("Signup Successful!"),y.style.display="none"):alert("Please fill out all fields.")}function Z(){var t=document.querySelector("svg.swicther-2-svg"),e=document.querySelector("header.header"),o=document.querySelector("svg.nav-logo-txt"),s=document.querySelector("svg.hmbrgr-menu"),l=document.querySelector("a.nav-link.shopping-list"),n=document.querySelector("svg.lock-02"),c=document.querySelector("body"),m=document.querySelectorAll("ul#categories > li.ctg"),d=document.querySelector(".top_list-title"),M=document.querySelectorAll(".top_list-book_title "),x=document.querySelectorAll(".top_list-see_more"),A=document.querySelector(".all_categories");t.innerHTML.includes("Switcher-2@2x.svg#switcher2")?(t.innerHTML='<use href="../img/SwitcherDark@2x.svg#switcherDark"></use>',e.style.backgroundColor="var(--black)",e.style.border=" 1.5px solid #FFFFFF",o.style.filter="brightness(0) invert(1)",s.style.filter="brightness(0) invert(1)",l.style.color="var(--white)",n.style.filter="brightness(0) invert(1)",c.style.backgroundColor="var(--black)",m.forEach(i=>{i.style.color="#FFFFFF"}),d.style.color="var(--white)",A.style.color="var(--white)",M.forEach(i=>{i.style.color="var(--white)"}),x.forEach(i=>{i.style.color="var(--white)"})):(t.innerHTML='<use href="../img/Switcher-2@2x.svg#switcher2"></use>',e.style.backgroundColor="var(--white)",e.style.border=" 1.5px solid #111111",o.style.filter="",s.style.filter="",l.style.color="var(--black)",n.style.filter="",c.style.backgroundColor="var(--white)",m.forEach(i=>{i.style.color="#111111"}),d.style.color="var(--black)",A.style.color="var(--black)",M.forEach(i=>{i.style.color="var(--black)"}),x.forEach(i=>{i.style.color="var(--black)"}))}let ee={lines:12,length:30,width:15,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#EAC645",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const O=new K(ee),C=t=>{O.spin(t)},$=()=>{O.stop()},h=document.getElementById("bookModal"),te=document.querySelector(".close"),oe=document.querySelector(".modalImage"),se=document.querySelector(".modalTitle"),ne=document.querySelector(".modalAuthor"),le=document.querySelector(".modalDescription"),re=document.querySelector(".modalBuyLinks"),E=document.querySelector(".addToShoppingList"),S=document.querySelector(".removeFromShoppingList"),D=document.querySelector(".feedback-div");let a=JSON.parse(localStorage.getItem("shoppingList"))||[],u=null;const ie={Amazon:"../img/png/Amazon_logo.png","Apple Books":"../img/png/apple-books.png","Barnes and Noble":"../img/png/barnes-noblepng.png","Books-A-Million":"../img/png//books-a-million.png",Bookshop:"../img/png/bookshop.png",IndieBound:"../img/png/indie-bound.png"};async function ce(t){u=t;try{const e=await ae(t);e&&(oe.src=e.book_image,se.textContent=e.title,ne.textContent=`Yazar: ${e.author}`,le.textContent=e.description||"Açıklama mevcut değil.",re.innerHTML=e.buy_links.map(o=>{const s=ie[o.name]||"./images/default-logo.png";return`<li><a href="${o.url}" target="_blank"><img src="${s}" alt="${o.name}" style="width: 40px; height: auto; margin-right: 10px;"></a></li>`}).join("")),I(t),h.style.display="block",document.body.style.overflow="hidden"}catch(e){console.error("Kitap bilgileri yüklenirken hata oluştu:",e)}}async function ae(t){try{const e=await fetch(`https://books-backend.p.goit.global/books/${t}`);if(!e.ok)throw new Error("Kitap bilgisi getirilemedi.");return await e.json()}catch(e){return console.error("API hatası:",e),null}}function I(t){a.includes(t)?(E.style.display="none",S.style.display="block"):(E.style.display="block",S.style.display="none")}E.addEventListener("click",()=>{a.includes(u)||(a.push(u),localStorage.setItem("shoppingList",JSON.stringify(a))),I(u),D.style.display="block"});S.addEventListener("click",()=>{a=a.filter(t=>t!==u),localStorage.setItem("shoppingList",JSON.stringify(a)),I(u),D.style.display="none"});te.addEventListener("click",()=>{h.style.display="none",document.body.style.overflow="visible"});window.addEventListener("click",t=>{t.target===h&&(h.style.display="none",document.body.style.overflow="visible")});document.addEventListener("keydown",function(t){t.key==="Escape"&&(h.style.display="none",document.body.style.overflow="visible")});function de(){J.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const r={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let H=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",me),document.addEventListener("click",ye),document.addEventListener("click",ge),window.addEventListener("scroll",P)});document.addEventListener("DOMContentLoaded",async function(){C(r.titleElement),r.topListElem.innerHTML="";const e=await R();let o="";e.forEach(s=>{o+=ue(s)}),r.topListElem.innerHTML=o,$()});function ue(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${pe(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function pe(t){let e=1;const o=t.filter(n=>n.book_image),s=[];for(let n=0;n<o.length;n++)s.push(o[n]);for(;s.length<5;)s.push(o[s.length%o.length]);const l=s.map(n=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${n._id}">
                <img class="top_list-book_cover" src="${n.book_image}" alt="${n.title}">
            <p class="top_list-quick">QUICK VIEW</p>
                </div>
            
            <h3 class="top_list-book_title">${n.title}</h3>
            <p class="top_list-book_author">${n.author}</p>
        </li>
        `).join("");return e++,l}const ye=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const o=e.dataset.bookid;ce(o)}},me=function(t){if(t.target.classList.contains("top_list-see_more")){r.topListElem.classList.add("hidden"),r.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;F(e),w(e),_(e)}},ge=async function(t){if(t.target.classList.contains("all-categories")&&(r.titleElement.innerHTML="Best Sellers <span>Books</span>",r.categoryListElem.classList.add("hidden"),r.topListElem.classList.remove("hidden"),_("All categories")),t.target.classList.contains("sideCat")){const e=t.target.textContent.trim();F(e),r.categoryListElem.classList.remove("hidden"),r.topListElem.classList.add("hidden"),_(e),await w(e),C(r.categoryListElem);try{await w(e)}finally{$()}}};async function w(t){try{C(r.titleElement),r.categoryListElem.innerHTML="";const e=await W(t);let o="";e.forEach(s=>{o+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${s._id}">
                  <img class="top_list-book_cover" src="${s.book_image}" alt="${s.title}">
              </div>
              <h3 class="top_list-book_title">${s.title}</h3>
              <p class="top_list-book_author">${s.author}</p>
          </li>
          `}),o+='<p class="end_categories">End</p>',r.categoryListElem.innerHTML=o}catch(e){console.error("Kategori verisi alınırken hata oluştu:",e),r.categoryListElem.innerHTML="<p>Kitaplar yüklenirken bir hata oluştu.</p>"}finally{$()}}function F(t){r.titleElement.innerHTML="";const e=t.split(" ");if(e.length===1){r.titleElement.textContent=t;return}const o=e.pop();r.titleElement.textContent=e.join(" ");const s=document.createElement("span");s.textContent=" "+o,r.titleElement.appendChild(s)}function _(t){document.querySelectorAll(".ctg").forEach(o=>{o.textContent.trim().toLowerCase()===t.toLowerCase()?o.classList.add("active"):o.classList.remove("active")})}function P(){const t=document.querySelector(".end_categories");if(t){const e=t.getBoundingClientRect(),o=window.innerHeight;e.top<o&&!H&&r.topListElem.classList.contains("hidden")&&(de(),H=!0)}}let v;window.addEventListener("scroll",function(){v&&clearTimeout(v),v=setTimeout(function(){P()},300)});const j=document.getElementById("scrollToTopBtn");document.body.scrollTop=0;document.documentElement.scrollTop=0;j.addEventListener("click",fe);window.addEventListener("scroll",he);function he(){document.body.scrollTop>20||document.documentElement.scrollTop>20?(document.getElementById("scrollToTopBtn").style.display="block",j.classList.remove("btnHidden")):document.getElementById("scrollToTopBtn").style.display="none"}function fe(){window.scrollTo({top:0,behavior:"smooth"})}let p=JSON.parse(localStorage.getItem("shoppingList"))||[];const g=document.getElementById("book-container"),b=document.querySelector(".empty-list");async function z(){if(p.length===0){b.style.display="block",g.innerHTML="";return}else b.style.display="none";g.innerHTML="";const t=p.filter(e=>e!=null&&e!=="");if(t.length===0){b.style.display="block",g.innerHTML="";return}try{(await Q(t)).forEach(o=>{const s=document.createElement("div");s.classList.add("book-card"),s.innerHTML=`
          <img src="${o.book_image}" alt="${o.title}" class="book-cover">
          <div class="book-info">
            <h3>${o.title}</h3>
            <p class="category">${o.list_name}</p>
            <p class="description">${o.description}</p>
            <p class="author">${o.author}</p>
            <a href="${o.buy_links[0].url}" target="_blank" class="buy-button">Amazon</a>
            <button class="delete-btn" data-id="${o._id}">🗑</button>
          </div>
        `,g.appendChild(s)})}catch(e){console.error("Error",e)}}document.addEventListener("DOMContentLoaded",z);document.getElementById("book-container").addEventListener("click",function(t){if(t.target.classList.contains("delete-btn")){const e=t.target.dataset.id;p=p.filter(o=>o!==e),ve(p),z()}});function ve(t){localStorage.setItem("shoppingList",JSON.stringify(t)),g.innerHTML=""}const N=document.querySelector(".pagination");p.length===0?N.style.display="none":N.style.display="flex";var be=document.querySelector("div.support-ukr > div.slider-div"),f=document.getElementById("slider");be.addEventListener("click",ke);function ke(){Ee(),Le()}function Le(){f.src.includes("/slider.svg#slider")?f.src="../img/blocks/sliderUp.svg#sliderUp":f.src="../img/blocks/slider.svg#slider"}function Ee(){if(f.src.includes("/slider.svg#slider")){var t=document.querySelector("ol.support-list > li:nth-child(1)"),e=document.querySelector("ol.support-list > li:nth-child(2)"),o=document.querySelector("ol.support-list > li:nth-child(3)");t.style.display="none",e.style.display="none",o.style.display="none";var s=document.querySelector("ol.support-list");s.style.counterSet="custom 3";var l=document.querySelector("ol.support-list > li:nth-child(7)"),n=document.querySelector("ol.support-list > li:nth-child(8)"),c=document.querySelector("ol.support-list > li:nth-child(9)");l.style.display="flex",n.style.display="flex",c.style.display="flex";var m=document.querySelectorAll("ol.support-list > li.last3 > a > img ");m.forEach(d=>d.style.position="relative"),m.forEach(d=>d.style.top="0px")}else{var t=document.querySelector("ol.support-list > li:nth-child(1)"),e=document.querySelector("ol.support-list > li:nth-child(2)"),o=document.querySelector("ol.support-list > li:nth-child(3)");t.style.display="",e.style.display="",o.style.display="";var s=document.querySelector("ol.support-list");s.style.counterSet="custom 1";var l=document.querySelector("ol.support-list > li:nth-child(7)"),n=document.querySelector("ol.support-list > li:nth-child(8)"),c=document.querySelector("ol.support-list > li:nth-child(9)");l.style.display="none",n.style.display="none",c.style.display="none"}}
//# sourceMappingURL=index.js.map
