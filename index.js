import{a as c,S as m}from"./assets/vendor-bpkVZ_BW.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const a of n.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function o(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();const f="https://books-backend.p.goit.global/books/category-list";fetch(f).then(t=>t.json()).then(t=>{t.forEach(e=>{const s=`<li class="ctg"><a href="./">${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",s)})}).catch(function(t){console.log(t)});const l="https://books-backend.p.goit.global",d=["/books/category-list","/books/top-books","/books/category","/books"];async function y(){const t=`${l}${d[1]}`;try{return(await c.get(t)).data}catch(e){throw console.error("Error fetching top books: ",e),e}}async function L(t){const e=`${l}${d[2]}`,s={category:t};try{return(await c.get(e,{params:s})).data}catch(o){throw console.error("Error fetching books by category: ",o),o}}let h={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const p=new m(h),u=t=>{p.spin(t)},g=()=>{p.stop()},i={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",E),document.addEventListener("click",b),document.addEventListener("click",v)});document.addEventListener("DOMContentLoaded",async function(){u(i.titleElement),i.topListElem.innerHTML="";const e=await y();let s="";e.forEach(o=>{s+=_(o)}),i.topListElem.innerHTML=s,g()});function _(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${k(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function k(t){let e=1;const s=t.map(o=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${o._id}">
                <img class="top_list-book_cover" src="${o.book_image}" alt="${o.title}">
            </div>
            <h3 class="top_list-book_title">${o.title}</h3>
            <p class="top_list-book_author">${o.author}</p>
        </li>
        `).join("");return e++,s}const b=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const s=e.dataset.bookid;onOpenModal(s)}},E=function(t){if(t.target.classList.contains("top_list-see_more")){i.topListElem.classList.add("hidden"),i.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;titleCategory(e),$(e),allCategoriesActive(e)}},v=async function(t){t.target.classList.contains("all_categories")&&(i.titleElement.innerHTML="Best Sellers <span>Books</span>",i.categoryListElem.classList.add("hidden"),i.topListElem.classList.remove("hidden"),allCategoriesActive("All categories")),t.target.classList.contains("link")&&(i.titleElement.innerHTML="Best Sellers <span>Books</span>",i.categoryListElem.classList.add("hidden"),i.topListElem.classList.remove("hidden"))};async function $(t){try{u(i.titleElement),i.categoryListElem.innerHTML="";const e=await L(t);let s="";e.forEach(o=>{s+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${o._id}">
                  <img class="top_list-book_cover" src="${o.book_image}" alt="${o.title}">
                  <div class="quick-view-text">Quick view</div>
              </div>
              <h3 class="top_list-book_title">${o.title}</h3>
              <p class="top_list-book_author">${o.author}</p>
          </li>
          `}),s+='<li><button class="all_categories">All Categories</button></li>',i.categoryListElem.innerHTML=s}catch(e){console.error("Kategori verisi alınırken hata oluştu:",e),i.categoryListElem.innerHTML="<p>Kitaplar yüklenirken bir hata oluştu.</p>"}finally{g()}}
//# sourceMappingURL=index.js.map
