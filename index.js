import{a as m,S as k,i as b}from"./assets/vendor-7_o5VXWO.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const a of r.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const _="https://books-backend.p.goit.global/books/category-list";fetch(_).then(t=>t.json()).then(t=>{t.forEach(e=>{const n=`<li class="ctg"><a href="./">${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",n)})}).catch(function(t){console.log(t)});const g="https://books-backend.p.goit.global",f=["/books/category-list","/books/top-books","/books/category","/books"];async function v(){const t=`${g}${f[1]}`;try{return(await m.get(t)).data}catch(e){throw console.error("Error fetching top books: ",e),e}}async function w(t){const e=`${g}${f[2]}`,n={category:t};try{return(await m.get(e,{params:n})).data}catch(o){throw console.error("Error fetching books by category: ",o),o}}var l=document.getElementById("login-modal"),d=document.getElementById("btn-sign-up"),B=document.getElementsByClassName("close-modal")[0],C=document.getElementsByClassName("submit-button")[0],u=document.getElementsByClassName("hmbrgr")[0];d.addEventListener("click",d.onclick);u.addEventListener("click",u.onclick);C.addEventListener("click",$);d.onclick=function(){l.style.display="flex"};u.onclick=function(){l.style.display="flex"};B.onclick=function(){l.style.display="none"};window.onclick=function(t){t.target==l&&(l.style.display="none")};function $(){var t=document.getElementById("username").value,e=document.getElementById("email").value,n=document.getElementById("password").value;t&&e&&n?(alert("Signup Successful!"),l.style.display="none"):alert("Please fill out all fields.")}let S={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const y=new k(S),h=t=>{y.spin(t)},L=()=>{y.stop()};function T(){b.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const s={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let p=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",I),document.addEventListener("click",A),document.addEventListener("click",N),window.addEventListener("scroll",E)});document.addEventListener("DOMContentLoaded",async function(){h(s.titleElement),s.topListElem.innerHTML="";const e=await v();let n="";e.forEach(o=>{n+=M(o)}),s.topListElem.innerHTML=n,L()});function M(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${H(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function H(t){let e=1;const n=t.map(o=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${o._id}">
                <img class="top_list-book_cover" src="${o.book_image}" alt="${o.title}">
            </div>
            <h3 class="top_list-book_title">${o.title}</h3>
            <p class="top_list-book_author">${o.author}</p>
        </li>
        `).join("");return e++,n}const A=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const n=e.dataset.bookid;onOpenModal(n)}},I=function(t){if(t.target.classList.contains("top_list-see_more")){s.topListElem.classList.add("hidden"),s.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;q(e),O(e),allCategoriesActive(e)}},N=async function(t){t.target.classList.contains("all_categories")&&(s.titleElement.innerHTML="Best Sellers <span>Books</span>",s.categoryListElem.classList.add("hidden"),s.topListElem.classList.remove("hidden"),allCategoriesActive("All categories")),t.target.classList.contains("link")&&(s.titleElement.innerHTML="Best Sellers <span>Books</span>",s.categoryListElem.classList.add("hidden"),s.topListElem.classList.remove("hidden"))};async function O(t){try{h(s.titleElement),s.categoryListElem.innerHTML="";const e=await w(t);let n="";e.forEach(o=>{n+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${o._id}">
                  <img class="top_list-book_cover" src="${o.book_image}" alt="${o.title}">
              </div>
              <h3 class="top_list-book_title">${o.title}</h3>
              <p class="top_list-book_author">${o.author}</p>
          </li>
          `}),n+='<li><button class="all_categories">All Categories</button></li>',s.categoryListElem.innerHTML=n}catch(e){console.error("Kategori verisi alınırken hata oluştu:",e),s.categoryListElem.innerHTML="<p>Kitaplar yüklenirken bir hata oluştu.</p>"}finally{L()}}function q(t){s.titleElement.innerHTML="";const e=t.split(" ");if(e.length===1){s.titleElement.textContent=t;return}const n=e.pop();s.titleElement.textContent=e.join(" ");const o=document.createElement("span");o.textContent=" "+n,s.titleElement.appendChild(o)}function E(){const t=document.querySelector(".all_categories");if(t){const e=t.getBoundingClientRect(),n=window.innerHeight;e.top<n&&!p&&s.topListElem.classList.contains("hidden")&&(T(),p=!0)}}let c;window.addEventListener("scroll",function(){c&&clearTimeout(c),c=setTimeout(function(){E()},300)});
//# sourceMappingURL=index.js.map
