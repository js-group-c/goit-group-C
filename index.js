import{a as L,S as q,i as H}from"./assets/vendor-7_o5VXWO.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const p of r.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&o(p)}).observe(document,{childList:!0,subtree:!0});function n(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=n(i);fetch(i.href,r)}})();const A="https://books-backend.p.goit.global/books/category-list";fetch(A).then(t=>t.json()).then(t=>{t.forEach(e=>{const n=`<li class="ctg"><a href="./">${e.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",n)})}).catch(function(t){console.log(t)});const b="https://books-backend.p.goit.global",E=["/books/category-list","/books/top-books","/books/category","/books"];async function O(){const t=`${b}${E[1]}`;try{return(await L.get(t)).data}catch(e){throw console.error("Error fetching top books: ",e),e}}async function x(t){const e=`${b}${E[2]}`,n={category:t};try{return(await L.get(e,{params:n})).data}catch(o){throw console.error("Error fetching books by category: ",o),o}}async function N(t){try{const e=[];for(id of t){const n=`${b}${E[3]}/${id}`,o=await L.get(n);e.push(o.data)}return e}catch(e){throw console.error("Error fetching books by IDs: ",e),e}}var c=document.getElementById("login-modal"),m=document.getElementById("btn-sign-up"),D=document.getElementsByClassName("close-modal")[0],P=document.getElementsByClassName("submit-button")[0],g=document.getElementsByClassName("hmbrgr")[0];m.addEventListener("click",m.onclick);g.addEventListener("click",g.onclick);P.addEventListener("click",j);m.onclick=function(){c.style.display="flex"};g.onclick=function(){c.style.display="flex"};D.onclick=function(){c.style.display="none"};window.onclick=function(t){t.target==c&&(c.style.display="none")};function j(){var t=document.getElementById("username").value,e=document.getElementById("email").value,n=document.getElementById("password").value;t&&e&&n?(alert("Signup Successful!"),c.style.display="none"):alert("Please fill out all fields.")}let J={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const S=new q(J),w=t=>{S.spin(t)},$=()=>{S.stop()},d=document.getElementById("bookModal"),K=document.querySelector(".close"),z=document.querySelector(".modalImage"),R=document.querySelector(".modalTitle"),F=document.querySelector(".modalAuthor"),U=document.querySelector(".modalDescription"),W=document.querySelector(".modalBuyLinks"),y=document.querySelector(".addToShoppingList"),f=document.querySelector(".removeFromShoppingList"),C=document.querySelector(".feedback-div");let a=JSON.parse(localStorage.getItem("shoppingList"))||[],l=null;const Q={Amazon:"../img/png/Amazon_logo.png","Apple Books":"../img/png/apple-books.png","Barnes and Noble":"../img/png/barnes-noblepng.png","Books-A-Million":"../img/png//books-a-million.png",Bookshop:"../img/png/bookshop.png",IndieBound:"../img/png/indie-bound.png"};async function V(t){l=t;try{const e=await Y(t);e&&(z.src=e.book_image,R.textContent=e.title,F.textContent=`Yazar: ${e.author}`,U.textContent=e.description||"AÃ§Ä±klama mevcut deÄŸil.",W.innerHTML=e.buy_links.map(n=>{const o=Q[n.name]||"./images/default-logo.png";return`<li><a href="${n.url}" target="_blank"><img src="${o}" alt="${n.name}" style="width: 40px; height: auto; margin-right: 10px;"></a></li>`}).join("")),v(t),d.style.display="block"}catch(e){console.error("Kitap bilgileri yÃ¼klenirken hata oluÅŸtu:",e)}}async function Y(t){try{const e=await fetch(`https://books-backend.p.goit.global/books/${t}`);if(!e.ok)throw new Error("Kitap bilgisi getirilemedi.");return await e.json()}catch(e){return console.error("API hatasÄ±:",e),null}}function v(t){a.includes(t)?(y.style.display="none",f.style.display="block"):(y.style.display="block",f.style.display="none")}y.addEventListener("click",()=>{a.includes(l)||(a.push(l),localStorage.setItem("shoppingList",JSON.stringify(a))),v(l),C.style.display="block"});f.addEventListener("click",()=>{a=a.filter(t=>t!==l),localStorage.setItem("shoppingList",JSON.stringify(a)),v(l),C.style.display="none"});K.addEventListener("click",()=>{d.style.display="none"});window.addEventListener("click",t=>{t.target===d&&(d.style.display="none")});function G(){H.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const s={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let _=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",et),document.addEventListener("click",tt),document.addEventListener("click",ot),window.addEventListener("scroll",M)});document.addEventListener("DOMContentLoaded",async function(){w(s.titleElement),s.topListElem.innerHTML="";const e=await O();let n="";e.forEach(o=>{n+=X(o)}),s.topListElem.innerHTML=n,$()});function X(t){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${t.list_name}</h2>
            <ul class="top_list-cards">${Z(t.books)}</ul>
            <button class="top_list-see_more" data-category="${t.list_name}">See More</button>
        </li>`}function Z(t){let e=1;const n=t.map(o=>`
        <li class="top_list-card" data-book-sequence-number="${e++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${o._id}">
                <img class="top_list-book_cover" src="${o.book_image}" alt="${o.title}">
            <p class="top_list-quick">QUICK VIEW</p>
                </div>
            
            <h3 class="top_list-book_title">${o.title}</h3>
            <p class="top_list-book_author">${o.author}</p>
        </li>
        `).join("");return e++,n}const tt=function(t){const e=t.target.closest(".top_list-book_cover_wrapper");if(e){const n=e.dataset.bookid;V(n)}},et=function(t){if(t.target.classList.contains("top_list-see_more")){s.topListElem.classList.add("hidden"),s.categoryListElem.classList.remove("hidden");const e=t.target.dataset.category;nt(e),I(e),h(e)}},ot=async function(t){t.target.classList.contains("all_categories")&&(s.titleElement.innerHTML="Best Sellers <span>Books</span>",s.categoryListElem.classList.add("hidden"),s.topListElem.classList.remove("hidden"),h("All categories")),t.target.classList.contains("...")&&(s.titleElement.innerHTML=category,s.categoryListElem.classList.remove("hidden"),s.topListElem.classList.add("hidden"),h(category),await I(category))};async function I(t){try{w(s.titleElement),s.categoryListElem.innerHTML="";const e=await x(t);let n="";e.forEach(o=>{n+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${o._id}">
                  <img class="top_list-book_cover" src="${o.book_image}" alt="${o.title}">
              </div>
              <h3 class="top_list-book_title">${o.title}</h3>
              <p class="top_list-book_author">${o.author}</p>
          </li>
          `}),n+='<li><button class="all_categories">All Categories</button></li>',s.categoryListElem.innerHTML=n}catch(e){console.error("Kategori verisi alÄ±nÄ±rken hata oluÅŸtu:",e),s.categoryListElem.innerHTML="<p>Kitaplar yÃ¼klenirken bir hata oluÅŸtu.</p>"}finally{$()}}function nt(t){s.titleElement.innerHTML="";const e=t.split(" ");if(e.length===1){s.titleElement.textContent=t;return}const n=e.pop();s.titleElement.textContent=e.join(" ");const o=document.createElement("span");o.textContent=" "+n,s.titleElement.appendChild(o)}function h(t){document.querySelectorAll("..."),s.allCategoriesElement.forEach(e=>{e.textContent.trim()===t?e.classList.add("active"):e.classList.remove("active")})}function M(){const t=document.querySelector(".all_categories");if(t){const e=t.getBoundingClientRect(),n=window.innerHeight;e.top<n&&!_&&s.topListElem.classList.contains("hidden")&&(G(),_=!0)}}let u;window.addEventListener("scroll",function(){u&&clearTimeout(u),u=setTimeout(function(){M()},300)});document.addEventListener("DOMContentLoaded",function(){fetch("../partials/header.html").then(t=>t.text()).then(t=>{document.getElementById("header-placeholder").innerHTML=t}).catch(t=>console.error("Header yÃ¼klenirken hata oluÅŸtu:",t)),fetch("../partials/support-ukr.html").then(t=>t.text()).then(t=>{document.getElementById("support-ukr-placeholder").innerHTML=t}).catch(t=>console.error("Support-ukr yÃ¼klenirken hata oluÅŸtu:",t))});const k=JSON.parse(localStorage.getItem("shoppingList"))||[];async function T(){const t=document.getElementById("book-container"),e=document.querySelector(".empty-list");if(k.length===0){e.style.display="block",t.innerHTML="";return}else e.style.display="none";t.innerHTML="";try{(await N(k)).forEach(o=>{const i=document.createElement("div");i.classList.add("book-card"),i.innerHTML=`
          <img src="${o.book_image}" alt="${o.title}" class="book-cover">
          <div class="book-info">
            <h3>${o.title}</h3>
            <p class="category">${o.list_name}</p>
            <p class="description">${o.description}</p>
            <p class="author">By: ${o.author}</p>
            <a href="${o.buy_links[0].url}" target="_blank" class="buy-button">Buy</a>
            <button class="delete-btn" data-id="${o._id}">ðŸ—‘ Remove</button>
          </div>
        `,t.appendChild(i)})}catch(n){console.error("Error",n)}}document.addEventListener("DOMContentLoaded",T);document.getElementById("book-container").addEventListener("click",function(t){if(t.target.classList.contains("delete-btn")){const e=t.target.dataset.id;let n=JSON.parse(localStorage.getItem("shoppingList"))||[];n=n.filter(o=>o!==e),localStorage.setItem("shoppingList",JSON.stringify(n)),T()}});const B=document.querySelector(".pagination");k.length===0?B.style.display="none":B.style.display="flex";
//# sourceMappingURL=index.js.map
