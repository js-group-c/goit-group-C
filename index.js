import{a as E,S as N,i as O}from"./assets/vendor-7_o5VXWO.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function o(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(s){if(s.ep)return;s.ep=!0;const l=o(s);fetch(s.href,l)}})();const D="https://books-backend.p.goit.global/books/category-list";fetch(D).then(e=>e.json()).then(e=>{e.forEach(t=>{const o=`<li class="ctg"><a href="#" class='${t.list_name}'>${t.list_name}</a></li>`;document.getElementById("categories").insertAdjacentHTML("beforeend",o)})}).catch(function(e){console.log(e)});const S="https://books-backend.p.goit.global",_=["/books/category-list","/books/top-books","/books/category","/books"];async function P(){const e=`${S}${_[1]}`;try{return(await E.get(e)).data}catch(t){throw console.error("Error fetching top books: ",t),t}}async function j(e){const t=`${S}${_[2]}`,o={category:e};try{return(await E.get(t,{params:o})).data}catch(n){throw console.error("Error fetching books by category: ",n),n}}async function z(e){try{const t=[];for(let o of e){const n=`${S}${_[3]}/${o}`,s=await E.get(n);t.push(s.data)}return t}catch(t){throw console.error("Error fetching books by IDs: ",t),t}}var u=document.getElementById("login-modal"),h=document.getElementById("btn-sign-up"),K=document.getElementsByClassName("close-modal")[0],J=document.getElementsByClassName("submit-button")[0],k=document.getElementsByClassName("hmbrgr")[0];h.addEventListener("click",h.onclick);k.addEventListener("click",k.onclick);J.addEventListener("click",U);h.onclick=function(){u.style.display="flex"};k.onclick=function(){u.style.display="flex"};K.onclick=function(){u.style.display="none"};window.onclick=function(e){e.target==u&&(u.style.display="none")};function U(){var e=document.getElementById("username").value,t=document.getElementById("email").value,o=document.getElementById("password").value;e&&t&&o?(alert("Signup Successful!"),u.style.display="none"):alert("Please fill out all fields.")}let F={lines:13,length:38,width:17,radius:45,scale:1,corners:1,speed:1,rotate:0,animation:"spinner-line-fade-quick",direction:1,color:"#ffffff",fadeColor:"transparent",top:"50%",left:"50%",shadow:"0 0 1px transparent",zIndex:2e9,className:"spinner",position:"absolute"};const I=new N(F),T=e=>{I.spin(e)},M=()=>{I.stop()},m=document.getElementById("bookModal"),R=document.querySelector(".close"),W=document.querySelector(".modalImage"),Q=document.querySelector(".modalTitle"),V=document.querySelector(".modalAuthor"),Y=document.querySelector(".modalDescription"),G=document.querySelector(".modalBuyLinks"),b=document.querySelector(".addToShoppingList"),L=document.querySelector(".removeFromShoppingList"),A=document.querySelector(".feedback-div");let c=JSON.parse(localStorage.getItem("shoppingList"))||[],a=null;const X={Amazon:"../img/png/Amazon_logo.png","Apple Books":"../img/png/apple-books.png","Barnes and Noble":"../img/png/barnes-noblepng.png","Books-A-Million":"../img/png//books-a-million.png",Bookshop:"../img/png/bookshop.png",IndieBound:"../img/png/indie-bound.png"};async function Z(e){a=e;try{const t=await ee(e);t&&(W.src=t.book_image,Q.textContent=t.title,V.textContent=`Yazar: ${t.author}`,Y.textContent=t.description||"Açıklama mevcut değil.",G.innerHTML=t.buy_links.map(o=>{const n=X[o.name]||"./images/default-logo.png";return`<li><a href="${o.url}" target="_blank"><img src="${n}" alt="${o.name}" style="width: 40px; height: auto; margin-right: 10px;"></a></li>`}).join("")),w(e),m.style.display="block",document.body.style.overflow="hidden"}catch(t){console.error("Kitap bilgileri yüklenirken hata oluştu:",t)}}async function ee(e){try{const t=await fetch(`https://books-backend.p.goit.global/books/${e}`);if(!t.ok)throw new Error("Kitap bilgisi getirilemedi.");return await t.json()}catch(t){return console.error("API hatası:",t),null}}function w(e){c.includes(e)?(b.style.display="none",L.style.display="block"):(b.style.display="block",L.style.display="none")}b.addEventListener("click",()=>{c.includes(a)||(c.push(a),localStorage.setItem("shoppingList",JSON.stringify(c))),w(a),A.style.display="block"});L.addEventListener("click",()=>{c=c.filter(e=>e!==a),localStorage.setItem("shoppingList",JSON.stringify(c)),w(a),A.style.display="none"});R.addEventListener("click",()=>{m.style.display="none",document.body.style.overflow="visible"});window.addEventListener("click",e=>{e.target===m&&(m.style.display="none",document.body.style.overflow="visible")});document.addEventListener("keydown",function(e){e.key==="Escape"&&(m.style.display="none",document.body.style.overflow="visible")});function te(){O.show({message:"There are no more books in this category",position:"topRight",backgroundColor:"#EAC645"})}const i={topListElem:document.querySelector("#topList"),categoryListElem:document.querySelector("#categoryList"),titleElement:document.querySelector(".top_list-title"),allCategoriesElement:document.querySelector("#categories")};let $=!1;document.addEventListener("DOMContentLoaded",function(){document.addEventListener("click",le),document.addEventListener("click",se),document.addEventListener("click",ie),window.addEventListener("scroll",H)});document.addEventListener("DOMContentLoaded",async function(){T(i.titleElement),i.topListElem.innerHTML="";const t=await P();let o="";t.forEach(n=>{o+=oe(n)}),i.topListElem.innerHTML=o,M()});function oe(e){return`<li class="top_list-container">
            <h2 class="top_list-category_name">${e.list_name}</h2>
            <ul class="top_list-cards">${ne(e.books)}</ul>
            <button class="top_list-see_more" data-category="${e.list_name}">See More</button>
        </li>`}function ne(e){let t=1;const o=e.filter(l=>l.book_image),n=[];for(let l=0;l<o.length;l++)n.push(o[l]);for(;n.length<5;)n.push(o[n.length%o.length]);const s=n.map(l=>`
        <li class="top_list-card" data-book-sequence-number="${t++}">
            <div class="top_list-book_cover_wrapper" data-bookid="${l._id}">
                <img class="top_list-book_cover" src="${l.book_image}" alt="${l.title}">
            <p class="top_list-quick">QUICK VIEW</p>
                </div>
            
            <h3 class="top_list-book_title">${l.title}</h3>
            <p class="top_list-book_author">${l.author}</p>
        </li>
        `).join("");return t++,s}const se=function(e){const t=e.target.closest(".top_list-book_cover_wrapper");if(t){const o=t.dataset.bookid;Z(o)}},le=function(e){if(e.target.classList.contains("top_list-see_more")){i.topListElem.classList.add("hidden"),i.categoryListElem.classList.remove("hidden");const t=e.target.dataset.category;re(t),x(t),v(t)}},ie=async function(e){e.target.classList.contains("all_categories")&&(i.titleElement.innerHTML="Best Sellers <span>Books</span>",i.categoryListElem.classList.add("hidden"),i.topListElem.classList.remove("hidden"),v("All categories")),e.target.classList.contains("...")&&(i.titleElement.innerHTML=category,i.categoryListElem.classList.remove("hidden"),i.topListElem.classList.add("hidden"),v(category),await x(category))};async function x(e){try{T(i.titleElement),i.categoryListElem.innerHTML="";const t=await j(e);let o="";t.forEach(n=>{o+=`
          <li class="category_list-card">
              <div class="top_list-book_cover_wrapper" data-bookid="${n._id}">
                  <img class="top_list-book_cover" src="${n.book_image}" alt="${n.title}">
              </div>
              <h3 class="top_list-book_title">${n.title}</h3>
              <p class="top_list-book_author">${n.author}</p>
          </li>
          `}),o+='<li><button class="all_categories">All Categories</button></li>',i.categoryListElem.innerHTML=o}catch(t){console.error("Kategori verisi alınırken hata oluştu:",t),i.categoryListElem.innerHTML="<p>Kitaplar yüklenirken bir hata oluştu.</p>"}finally{M()}}function re(e){i.titleElement.innerHTML="";const t=e.split(" ");if(t.length===1){i.titleElement.textContent=e;return}const o=t.pop();i.titleElement.textContent=t.join(" ");const n=document.createElement("span");n.textContent=" "+o,i.titleElement.appendChild(n)}function v(e){document.querySelectorAll("..."),i.allCategoriesElement.forEach(t=>{t.textContent.trim()===e?t.classList.add("active"):t.classList.remove("active")})}function H(){const e=document.querySelector(".all_categories");if(e){const t=e.getBoundingClientRect(),o=window.innerHeight;t.top<o&&!$&&i.topListElem.classList.contains("hidden")&&(te(),$=!0)}}let f;window.addEventListener("scroll",function(){f&&clearTimeout(f),f=setTimeout(function(){H()},300)});let d=JSON.parse(localStorage.getItem("shoppingList"))||[],p=!1;async function B(){if(p)return;p=!0,console.trace("fetchBooks çağrıldı");const e=document.getElementById("book-container"),t=document.querySelector(".empty-list");if(d.length===0){t.style.display="block",e.innerHTML="",p=!1;return}else t.style.display="none";const o=d.filter(n=>n!=null&&n!=="");if(o.length===0){t.style.display="block",e.innerHTML="",p=!1;return}try{(await z(o)).forEach(s=>{const l=document.createElement("div");l.classList.add("book-card"),l.innerHTML=`
          <img src="${s.book_image}" alt="${s.title}" class="book-cover">
          <div class="book-info">
            <h3>${s.title}</h3>
            <p class="category">${s.list_name}</p>
            <p class="description">${s.description}</p>
            <p class="author">${s.author}</p>
            <a href="${s.buy_links[0].url}" target="_blank" class="buy-button">Amazon</a>
            <button class="delete-btn" data-id="${s._id}">🗑</button>
          </div>
        `,e.appendChild(l)})}catch(n){console.error("Error",n)}p=!1}document.addEventListener("DOMContentLoaded",()=>{B()});document.getElementById("book-container").addEventListener("click",function(e){if(e.target.classList.contains("delete-btn")){const t=e.target.dataset.id;d=d.filter(o=>o!==t),ce(d),B()}});function ce(e){localStorage.setItem("shoppingList",JSON.stringify(e)),document.hidden||B()}const C=document.querySelector(".pagination");d.length===0?C.style.display="none":C.style.display="flex";var ae=document.querySelector("div.support-ukr > div.slider-div"),y=document.getElementById("slider");ae.addEventListener("click",de);function de(){pe(),ue()}function ue(){y.src.includes("/slider.svg#slider")?y.src="../img/blocks/sliderUp.svg#sliderUp":y.src="../img/blocks/slider.svg#slider"}function pe(){if(y.src.includes("/slider.svg#slider")){var e=document.querySelector("ol.support-list > li:nth-child(1)"),t=document.querySelector("ol.support-list > li:nth-child(2)"),o=document.querySelector("ol.support-list > li:nth-child(3)");e.style.display="none",t.style.display="none",o.style.display="none";var n=document.querySelector("ol.support-list");n.style.counterSet="custom 3";var s=document.querySelector("ol.support-list > li:nth-child(7)"),l=document.querySelector("ol.support-list > li:nth-child(8)"),r=document.querySelector("ol.support-list > li:nth-child(9)");s.style.display="flex",l.style.display="flex",r.style.display="flex";var q=document.querySelectorAll("ol.support-list > li.last3 > a > img ");q.forEach(g=>g.style.position="relative"),q.forEach(g=>g.style.top="0px")}else{var e=document.querySelector("ol.support-list > li:nth-child(1)"),t=document.querySelector("ol.support-list > li:nth-child(2)"),o=document.querySelector("ol.support-list > li:nth-child(3)");e.style.display="",t.style.display="",o.style.display="";var n=document.querySelector("ol.support-list");n.style.counterSet="custom 1";var s=document.querySelector("ol.support-list > li:nth-child(7)"),l=document.querySelector("ol.support-list > li:nth-child(8)"),r=document.querySelector("ol.support-list > li:nth-child(9)");s.style.display="none",l.style.display="none",r.style.display="none"}}
//# sourceMappingURL=index.js.map
