{"version":3,"file":"shopping.js","sources":["../src/js/shopping-page.js"],"sourcesContent":["import { getBookByIds } from './booksAPI.js';\nlet savedBooks = JSON.parse(localStorage.getItem('shoppingList')) || [];\nconst booksContainer = document.getElementById('book-container');\nconst emptyListMessage = document.querySelector('.empty-list');\nlet booksPerPage = 4; // her sayfada 4 kitap\nlet currentPage = 1;\nasync function fetchBooks() {\n  if (savedBooks.length === 0) {\n    emptyListMessage.style.display = 'block';\n    booksContainer.innerHTML = '';\n    renderPagination();\n    return;\n  } else {\n    emptyListMessage.style.display = 'none';\n  }\n  booksContainer.innerHTML = '';\n  const validBookIds = savedBooks.filter(id => id !== null && id !== undefined && id !== '');\n  if (validBookIds.length === 0) {\n    emptyListMessage.style.display = 'block';\n    booksContainer.innerHTML = '';\n    renderPagination();\n    return;\n  }\n  try {\n    const books = await getBookByIds(validBookIds);\n    displayBooks(books);\n    renderPagination();\n  } catch (error) {\n    console.error('Error', error);\n  }\n}\nfunction displayBooks(books) {\n  booksContainer.innerHTML = '';\n  const startIndex = (currentPage - 1) * booksPerPage;\n  const endIndex = startIndex + booksPerPage;\n  const booksToShow = books.slice(startIndex, endIndex);\n  booksToShow.forEach((book, index) => {\n    const bookCard = document.createElement('div');\n    bookCard.classList.add('book-card');\n    bookCard.setAttribute('data-index', index + 1);\n    bookCard.innerHTML = `\n      <img src=\"${book.book_image}\" alt=\"${book.title}\" class=\"book-cover\">\n      <div class=\"book-info\">\n        <button class=\"delete-btn\" data-id=\"${book._id}\">&#128465;</button>\n        <h3>${book.title}</h3>\n        <p class=\"category\">${book.list_name}</p>\n        <p class=\"description\">${book.description}</p>\n        <p class=\"author\">${book.author}</p>\n        <a href=\"${book.buy_links[0].url}\" target=\"_blank\" class=\"buy-button\"><img src=\"./img/amazon.svg\" alt=\"icon\" class=\"amazon-icon\"></a>\n      </div>\n    `;\n    booksContainer.appendChild(bookCard);\n  });\n}\nfunction renderPagination() {\n  const totalPages = Math.ceil(savedBooks.length / booksPerPage); // total page sayısını gsöterir\n  const paginationContainer = document.getElementById(\"pagination-container\");\n  paginationContainer.innerHTML = '';\n  if (totalPages <= 1) return; // eğer sadece 1 sayfa varsa paginatonu göstermez\n  // first page\n  paginationContainer.innerHTML += `\n    <button class=\"pagination-btn first-page\" ${currentPage === 1 ? 'disabled' : ''}>⏮</button>\n  `;\n  // prev page\n  paginationContainer.innerHTML += `\n    <button class=\"pagination-btn prev-page\" ${currentPage === 1 ? 'disabled' : ''}>◀</button>\n  `;\n  // page numbers\n  for (let i = Math.max(1, currentPage - 2); i <= Math.min(totalPages, currentPage + 2); i++) {\n    paginationContainer.innerHTML += `\n      <button class=\"pagination-btn page-number ${i === currentPage ? 'active' : ''}\" data-page=\"${i}\">${i}</button>\n    `;\n  }\n  // next page\n  paginationContainer.innerHTML += `\n    <button class=\"pagination-btn next-page\" ${currentPage === totalPages ? 'disabled' : ''}>▶</button>\n  `;\n  // last page\n  paginationContainer.innerHTML += `\n    <button class=\"pagination-btn last-page\" ${currentPage === totalPages ? 'disabled' : ''}>⏭</button>\n  `;\n}\n// pagination click event\ndocument.addEventListener(\"click\", function (event) {\n  if (event.target.classList.contains('page-number')) {\n    currentPage = parseInt(event.target.dataset.page);\n    fetchBooks();\n  } else if (event.target.classList.contains('first-page')) {\n    currentPage = 1;\n    fetchBooks();\n  } else if (event.target.classList.contains('prev-page')) {\n    if (currentPage > 1) {\n      currentPage--;\n      fetchBooks();\n    }\n  } else if (event.target.classList.contains('next-page')) {\n    if (currentPage < Math.ceil(savedBooks.length / booksPerPage)) {\n      currentPage++;\n      fetchBooks();\n    }\n  } else if (event.target.classList.contains('last-page')) {\n    currentPage = Math.ceil(savedBooks.length / booksPerPage);\n    fetchBooks();\n  }\n});\ndocument.addEventListener('DOMContentLoaded', fetchBooks);\n// this is for delete book\ndocument.getElementById('book-container').addEventListener('click', function (event) {\n  if (event.target.classList.contains('delete-btn')) {\n    const bookId = event.target.dataset.id;\n    savedBooks = savedBooks.filter(id => id !== bookId);\n    updateShoppingList(savedBooks);\n    fetchBooks();\n  }\n});\n// update the localstorage\nfunction updateShoppingList(updatedBooks) {\n  localStorage.setItem('shoppingList', JSON.stringify(updatedBooks));\n}\n"],"names":["savedBooks","booksContainer","emptyListMessage","booksPerPage","currentPage","fetchBooks","renderPagination","validBookIds","id","books","getBookByIds","displayBooks","error","startIndex","endIndex","book","index","bookCard","totalPages","paginationContainer","i","event","bookId","updateShoppingList","updatedBooks"],"mappings":"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"}