{"version":3,"file":"index.js","sources":["../src/js/booksAPI.js","../src/js/spinner.js","../src/js/main-page.js"],"sourcesContent":["import axios from 'axios';\n\nconst BASE_URL = \"https://books-backend.p.goit.global\";\nconst END_POINTS = [\n    \"/books/category-list\",\n    \"/books/top-books\",\n    \"/books/category\",\n    \"/books\",\n];\n\n\n//Belirtilen kategorideki kitapların listesini API' den getiriyor.\nexport async function getCategoryList() {\n    const url = \"${BASE_URL}${END_POINTS[0]}\";\n    try {\n        const response = await axios.get(url);\n        const sortedData = response.data.sort((a, b) =>\n            a.list_name.localeCompare(b.list_name)\n        );\n        return sortedData;\n    } catch (error) {\n        console.error(\"Error fetching category list: \", error);\n        throw error;\n    }\n}\n\n\n//En çok satan kitapları API' den getiriyor.\nexport async function getTopBooks() {\n    const url = `${BASE_URL}${END_POINTS[1]}`;\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching top books: \", error);\n        throw error;\n    }\n}\n\n\n//Belirtilen kategorideki kitapları API' den getiriyor.\nexport async function getBooksByCategory(category) {\n    const url = `${BASE_URL}${END_POINTS[2]}`;\n    const params = {\n        category: category,\n    };\n    try {\n        const response = await axios.get(url, { params });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching books by category: \", error);\n        throw error;\n    }\n}\n\n\n//Belirtilen ID'ye sahip kitabı API' den getiriyor.\nexport async function getBookById(id) {\n    const url = `${BASE_URL}${END_POINTS[3]}/${id}`;\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching book by ID: \", error);\n        throw error;\n    }\n}\n\n\n//Birden fazla kitabı ID'lerine göre API'den getiriyor.\nexport async function getBookByIds(idsArray) {\n    try {\n        const booksArray = [];\n        for (id of idsArray) {\n            const url = `${BASE_URL}${END_POINTS[3]}/${id}`;\n            const response = await axios.get(url);\n            booksArray.push(response.data);\n        }\n        return booksArray;\n    } catch (error) {\n        console.error(\"Error fetching books by IDs: \", error);\n        throw error;\n    }\n}\n\n\n","import { Spinner } from 'spin.js';\n\nlet opts = {\n    lines: 13,\n    length: 38,\n    width: 17,\n    radius: 45,\n    scale: 1,\n    corners: 1,\n    speed: 1,\n    rotate: 0,\n    animation: 'spinner-line-fade-quick',\n    direction: 1,\n    color: '#ffffff',\n    fadeColor: 'transparent',\n    top: '50%',\n    left: '50%',\n    shadow: '0 0 1px transparent',\n    zIndex: 2000000000,\n    className: 'spinner',\n    position: 'absolute',\n};\n\nconst spinner = new Spinner(opts);\n\nexport const spinnerPlay = containerRef => {\n  spinner.spin(containerRef);\n};\n\nexport const spinnerStop = () => {\n  spinner.stop();\n};","import { getTopBooks, getBooksByCategory } from './booksAPI.js';\nimport { spinnerPlay, spinnerStop } from './spinner.js';\n\nconst references = {\n  topListElem: document.querySelector('#topList'),\n  categoryListElem: document.querySelector('#categoryList'),\n  titleElement: document.querySelector('.top_list-title'),\n};\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  document.addEventListener('click', clickSeeMore); //See More butonuna tıklanınca ilgili kategoriye ait kitapları gösterir.\n  document.addEventListener('click', clickByBook); //Bir kitap kartına tıklanınca detaylarını gösteren modal açar.\n});\n\n//En Çok Satanlar Listesini Getirme\ndocument.addEventListener('DOMContentLoaded', async function () {\n  spinnerPlay(references.titleElement);\n  references.topListElem.innerHTML = '';\n  const topListData = getTopBooks();\n  const topList = await topListData;\n  let html = '';\n  topList.forEach(elem => {\n    html += renderTopList(elem);\n  });\n  references.topListElem.innerHTML = html;\n  spinnerStop();\n});\n\n//En Çok Satanlar Listesini Renderleme\nfunction renderTopList(elem) {\n  return `<li class=\"top_list-container\">\n            <h2 class=\"top_list-category_name\">${elem.list_name}</h2>\n            <ul class=\"top_list-cards\">${renderBooks(elem.books)}</ul>\n            <button class=\"top_list-see_more\" data-category=\"${\n              elem.list_name\n            }\">See More</button>\n        </li>`;\n}\n\n//Kitap kartlarının oluşturulması (kapak, başlık ve yazar ismi)\nfunction renderBooks(books) {\n  let i = 1;\n  const bookHtml = books\n    .map(\n      book => `\n        <li class=\"top_list-card\" data-book-sequence-number=\"${i++}\">\n            <div class=\"top_list-book_cover_wrapper\" data-bookid=\"${\n              book._id\n            }\" tabindex=\"0\">\n                <img class=\"top_list-book_cover\" src=\"${\n                  book.book_image\n                }\" alt=\"${book.title}\">\n                \n            </div>\n            <h3 class=\"top_list-book_title\">${book.title}</h3>\n            <p class=\"top_list-book_author\">${book.author}</p>\n        </li>\n        `\n    )\n    .join('');\n  i++;\n  return bookHtml;\n}\n\nconst clickByBook = function (event) {\n  if (event.target.classList.contains('top_list-book_cover_wrapper')) {\n    const bookId = event.target.dataset.bookid;\n    onOpenModal(bookId); //kitap ID' si ile birlikte modal açma fonksiyonunu çalıştırır.\n  }\n};\n"],"names":["BASE_URL","END_POINTS","getTopBooks","url","axios","error","opts","spinner","Spinner","spinnerPlay","containerRef","spinnerStop","references","clickByBook","topList","html","elem","renderTopList","renderBooks","books","i","bookHtml","book","event","bookId"],"mappings":"6vBAEA,MAAMA,EAAW,sCACXC,EAAa,CACf,uBACA,mBACA,kBACA,QACJ,EAoBO,eAAeC,GAAc,CAChC,MAAMC,EAAM,GAAGH,CAAQ,GAAGC,EAAW,CAAC,CAAC,GACvC,GAAI,CAEA,OADiB,MAAMG,EAAM,IAAID,CAAG,GACpB,IACnB,OAAQE,EAAO,CACZ,cAAQ,MAAM,6BAA8BA,CAAK,EAC3CA,CACT,CACL,CCnCA,IAAIC,EAAO,CACP,MAAO,GACP,OAAQ,GACR,MAAO,GACP,OAAQ,GACR,MAAO,EACP,QAAS,EACT,MAAO,EACP,OAAQ,EACR,UAAW,0BACX,UAAW,EACX,MAAO,UACP,UAAW,cACX,IAAK,MACL,KAAM,MACN,OAAQ,sBACR,OAAQ,IACR,UAAW,UACX,SAAU,UACd,EAEA,MAAMC,EAAU,IAAIC,EAAQF,CAAI,EAEnBG,EAAcC,GAAgB,CACzCH,EAAQ,KAAKG,CAAY,CAC3B,EAEaC,EAAc,IAAM,CAC/BJ,EAAQ,KAAI,CACd,EC5BMK,EAAa,CACjB,YAAa,SAAS,cAAc,UAAU,EAC9C,iBAAkB,SAAS,cAAc,eAAe,EACxD,aAAc,SAAS,cAAc,iBAAiB,CACxD,EAEA,SAAS,iBAAiB,mBAAoB,UAAY,CACxD,SAAS,iBAAiB,QAAS,YAAY,EAC/C,SAAS,iBAAiB,QAASC,CAAW,CAChD,CAAC,EAGD,SAAS,iBAAiB,mBAAoB,gBAAkB,CAC9DJ,EAAYG,EAAW,YAAY,EACnCA,EAAW,YAAY,UAAY,GAEnC,MAAME,EAAU,MADIZ,IAEpB,IAAIa,EAAO,GACXD,EAAQ,QAAQE,GAAQ,CACtBD,GAAQE,EAAcD,CAAI,CAC9B,CAAG,EACDJ,EAAW,YAAY,UAAYG,EACnCJ,GACF,CAAC,EAGD,SAASM,EAAcD,EAAM,CAC3B,MAAO;AAAA,iDACwCA,EAAK,SAAS;AAAA,yCACtBE,EAAYF,EAAK,KAAK,CAAC;AAAA,+DAElDA,EAAK,SACN;AAAA,cAEb,CAGA,SAASE,EAAYC,EAAO,CAC1B,IAAIC,EAAI,EACR,MAAMC,EAAWF,EACd,IACCG,GAAQ;AAAA,+DACiDF,GAAG;AAAA,oEAEpDE,EAAK,GACN;AAAA,wDAEKA,EAAK,UACvB,UAA0BA,EAAK,KAAK;AAAA;AAAA;AAAA,8CAGUA,EAAK,KAAK;AAAA,8CACVA,EAAK,MAAM;AAAA;AAAA,SAGpD,EACA,KAAK,EAAE,EACV,OAAAF,IACOC,CACT,CAEA,MAAMR,EAAc,SAAUU,EAAO,CACnC,GAAIA,EAAM,OAAO,UAAU,SAAS,6BAA6B,EAAG,CAClE,MAAMC,EAASD,EAAM,OAAO,QAAQ,OACpC,YAAYC,CAAM,CACnB,CACH"}