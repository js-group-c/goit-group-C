{"version":3,"file":"index.js","sources":["../src/js/all-categories.js","../src/js/booksAPI.js","../src/js/header.js","../src/js/spinner.js","../src/js/warnings.js","../src/js/main-page.js"],"sourcesContent":["const url = 'https://books-backend.p.goit.global/books/category-list';\nfetch(url)\n  .then(response => {\n    return response.json();\n  })\n  .then(data => {\n    data.forEach(cat => {\n        const markup = `<li class=\"ctg\"><a href=\"./\">${cat.list_name}</a></li>`;\n        document.getElementById('categories').insertAdjacentHTML(\"beforeend\", markup);\n    })\n  })\n  .catch(function(error) {\n    console.log(error);\n  });\n\n","import axios from 'axios';\n\nconst BASE_URL = \"https://books-backend.p.goit.global\";\nconst END_POINTS = [\n    \"/books/category-list\",\n    \"/books/top-books\",\n    \"/books/category\",\n    \"/books\",\n];\n\n\n//Belirtilen kategorideki kitapların listesini API' den getiriyor.\nexport async function getCategoryList() {\n    const url = \"${BASE_URL}${END_POINTS[0]}\";\n    try {\n        const response = await axios.get(url);\n        const sortedData = response.data.sort((a, b) =>\n            a.list_name.localeCompare(b.list_name)\n        );\n        return sortedData;\n    } catch (error) {\n        console.error(\"Error fetching category list: \", error);\n        throw error;\n    }\n}\n\n\n//En çok satan kitapları API' den getiriyor.\nexport async function getTopBooks() {\n    const url = `${BASE_URL}${END_POINTS[1]}`;\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching top books: \", error);\n        throw error;\n    }\n}\n\n\n//Belirtilen kategorideki kitapları API' den getiriyor.\nexport async function getBooksByCategory(category) {\n    const url = `${BASE_URL}${END_POINTS[2]}`;\n    const params = {\n        category: category,\n    };\n    try {\n        const response = await axios.get(url, { params });\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching books by category: \", error);\n        throw error;\n    }\n}\n\n\n//Belirtilen ID'ye sahip kitabı API' den getiriyor.\nexport async function getBookById(id) {\n    const url = `${BASE_URL}${END_POINTS[3]}/${id}`;\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        console.error(\"Error fetching book by ID: \", error);\n        throw error;\n    }\n}\n\n\n//Birden fazla kitabı ID'lerine göre API'den getiriyor.\nexport async function getBookByIds(idsArray) {\n    try {\n        const booksArray = [];\n        for (id of idsArray) {\n            const url = `${BASE_URL}${END_POINTS[3]}/${id}`;\n            const response = await axios.get(url);\n            booksArray.push(response.data);\n        }\n        return booksArray;\n    } catch (error) {\n        console.error(\"Error fetching books by IDs: \", error);\n        throw error;\n    }\n}\n\n\n","var modal = document.getElementById('login-modal');\nvar btn = document.getElementById('btn-sign-up');\nvar span = document.getElementsByClassName('close-modal')[0];\n\nvar submitBtn = document.getElementsByClassName('submit-button')[0];\nvar btnHmbrgr = document.getElementsByClassName('hmbrgr')[0];\n\nbtn.addEventListener('click', btn.onclick);\nbtnHmbrgr.addEventListener(\"click\", btnHmbrgr.onclick);\nsubmitBtn.addEventListener('click', signUp);\n\nbtn.onclick = function () {\n  modal.style.display = 'flex';\n};\nbtnHmbrgr.onclick = function () {\n    modal.style.display = 'flex';\n  };\nspan.onclick = function () {\n  modal.style.display = 'none';\n};\nwindow.onclick = function (event) {\n  if (event.target == modal) modal.style.display = 'none';\n};\n\nfunction signUp() {\n  var username = document.getElementById('username').value;\n  var email = document.getElementById('email').value;\n  var password = document.getElementById('password').value;\n\n  if (username && email && password) {\n    alert('Signup Successful!');\n    modal.style.display = 'none';\n  } else {\n    alert('Please fill out all fields.');\n  }\n}\n","import { Spinner } from 'spin.js';\n\nlet opts = {\n    lines: 13,\n    length: 38,\n    width: 17,\n    radius: 45,\n    scale: 1,\n    corners: 1,\n    speed: 1,\n    rotate: 0,\n    animation: 'spinner-line-fade-quick',\n    direction: 1,\n    color: '#ffffff',\n    fadeColor: 'transparent',\n    top: '50%',\n    left: '50%',\n    shadow: '0 0 1px transparent',\n    zIndex: 2000000000,\n    className: 'spinner',\n    position: 'absolute',\n};\n\nconst spinner = new Spinner(opts);\n\nexport const spinnerPlay = containerRef => {\n  spinner.spin(containerRef);\n};\n\nexport const spinnerStop = () => {\n  spinner.stop();\n};","import iziToast from 'izitoast';\n\nexport function showNoBooksAlert() {\n  iziToast.show({\n    message: 'There are no more books in this category',\n    position: 'topRight',\n    backgroundColor: '#EAC645',\n  });\n}","import { getTopBooks, getBooksByCategory } from './booksAPI.js';\nimport { spinnerPlay, spinnerStop } from './spinner.js';\n// import { onOpenModal } from './modal.js';\nimport { showNoBooksAlert } from './warnings.js';\n\nconst references = {\n  topListElem: document.querySelector('#topList'),\n  categoryListElem: document.querySelector('#categoryList'),\n  titleElement: document.querySelector('.top_list-title'),\n  allCategoriesElement: document.querySelector('#categories'),\n};\n\nlet noBooksAlertShow = false;\n\ndocument.addEventListener('DOMContentLoaded', function () {\n  document.addEventListener('click', clickSeeMore); //See More butonuna tıklanınca ilgili kategoriye ait kitapları gösterir.\n  document.addEventListener('click', clickByBook); //Bir kitap kartına tıklanınca detaylarını gösteren modal açar.\n  document.addEventListener('click', clickByAllCategories); //Bir kategoriye tıklanınca bu kategorinin kitapları gösterir.\n  window.addEventListener('scroll', scrollHandler); //Sayfanın en altına kaydırıldığında kategorinin boş olup olmadığını kontrol eder.\n});\n\n//En Çok Satanlar Listesini Getirme\ndocument.addEventListener('DOMContentLoaded', async function () {\n  spinnerPlay(references.titleElement);\n  references.topListElem.innerHTML = '';\n  const topListData = getTopBooks();\n  const topList = await topListData;\n  let html = '';\n  topList.forEach(elem => {\n    html += renderTopList(elem);\n  });\n  references.topListElem.innerHTML = html;\n  spinnerStop();\n});\n\n//En Çok Satanlar Listesini Renderleme\nfunction renderTopList(elem) {\n  return `<li class=\"top_list-container\">\n            <h2 class=\"top_list-category_name\">${elem.list_name}</h2>\n            <ul class=\"top_list-cards\">${renderBooks(elem.books)}</ul>\n            <button class=\"top_list-see_more\" data-category=\"${\n              elem.list_name\n            }\">See More</button>\n        </li>`;\n}\n\n//Kitap kartlarının oluşturulması (kapak, başlık ve yazar ismi)\nfunction renderBooks(books) {\n  let i = 1;\n  const bookHtml = books\n    .map(\n      book => `\n        <li class=\"top_list-card\" data-book-sequence-number=\"${i++}\">\n            <div class=\"top_list-book_cover_wrapper\" data-bookid=\"${book._id}\">\n                <img class=\"top_list-book_cover\" src=\"${book.book_image}\" alt=\"${book.title}\">\n            </div>\n            <h3 class=\"top_list-book_title\">${book.title}</h3>\n            <p class=\"top_list-book_author\">${book.author}</p>\n        </li>\n        `\n    )\n    .join('');\n  i++;\n  return bookHtml; \n}\n\nconst clickByBook = function (event) {\n  const bookWrapper = event.target.closest('.top_list-book_cover_wrapper');\n  if (bookWrapper) {\n    const bookId = bookWrapper.dataset.bookid;\n    onOpenModal(bookId); //kitap ID' si ile birlikte modal açma fonksiyonunu çalıştırır.\n  }\n};\n\nconst clickSeeMore = function (event) {  \n    if (event.target.classList.contains(\"top_list-see_more\")) { \n        references.topListElem.classList.add(\"hidden\");   //Üst kısımdaki kitap listesi gizlenir.\n        references.categoryListElem.classList.remove(\"hidden\");   //Kategorilerin bulunduğu liste alanı gösterilir.\n        const category = event.target.dataset.category;\n        titleCategory(category);   //Seçilen kategorinin başlığını değiştirir.\n        categoryList(category);   //Seçilen kategoriye ait kitapları getirip listeler.\n        allCategoriesActive(category);   //Seçilen kategoriyi aktif hale getirir. Görsel vurgulama ekler.\n    }\n};\n\nconst clickByAllCategories = async function (event) {\n  if (event.target.classList.contains('all_categories')) {\n    references.titleElement.innerHTML = 'Best Sellers <span>Books</span>';\n    references.categoryListElem.classList.add('hidden');\n    references.topListElem.classList.remove('hidden');\n    allCategoriesActive('All categories');\n  }\n  if (event.target.classList.contains('link')) {\n    references.titleElement.innerHTML = 'Best Sellers <span>Books</span>';\n    references.categoryListElem.classList.add('hidden');\n    references.topListElem.classList.remove('hidden');\n  }\n};\n\n//Kategoriye Ait Kitapların Listesini Getirme\nasync function categoryList(category) {\n  try {\n    spinnerPlay(references.titleElement);\n    references.categoryListElem.innerHTML = '';\n\n    const categoryData = await getBooksByCategory(category);\n    let html = '';\n\n    categoryData.forEach(book => {\n      html += `\n          <li class=\"category_list-card\">\n              <div class=\"top_list-book_cover_wrapper\" data-bookid=\"${book._id}\">\n                  <img class=\"top_list-book_cover\" src=\"${book.book_image}\" alt=\"${book.title}\">\n              </div>\n              <h3 class=\"top_list-book_title\">${book.title}</h3>\n              <p class=\"top_list-book_author\">${book.author}</p>\n          </li>\n          `;\n    });\n\n    html += `<li><button class=\"all_categories\">All Categories</button></li>`;\n    references.categoryListElem.innerHTML = html;\n  } catch (error) {\n    console.error('Kategori verisi alınırken hata oluştu:', error);\n    references.categoryListElem.innerHTML = '<p>Kitaplar yüklenirken bir hata oluştu.</p>';\n  } finally {\n    spinnerStop();\n  }\n}\n\n//Seçilen kategori adını sayfa başlığı olarak gösterir.\nfunction titleCategory(category) {\n  references.titleElement.innerHTML = ''; \n\n  const words = category.split(' ');\n  if (words.length === 1) {\n    references.titleElement.textContent = category;\n    return;\n  }\n\n  const lastWord = words.pop();\n  references.titleElement.textContent = words.join(' ');\n\n  const spanElement = document.createElement('span');\n  spanElement.textContent = ' ' + lastWord;\n  references.titleElement.appendChild(spanElement);\n}\n\n//function allCategoriesActive(category) {}\n\n//Sayfa en alta kaydırıldığında seçilen kategoriye ait kitap yoksa bu kategoride kitap bulunmamaktadır uyarısı verir.\nfunction scrollHandler() {\n    const allCategoriesButton = document.querySelector('.all_categories');\n    if (allCategoriesButton) {  \n        const allCatBtnPosition = allCategoriesButton.getBoundingClientRect();  //Butonun konumu alınır.\n        const windowHeight = window.innerHeight;   //Kullanıcının görünür pencere yükseliğini alır.\n\n        if (allCatBtnPosition.top < windowHeight &&\n            !noBooksAlertShow &&\n            references.topListElem.classList.contains('hidden')\n        ) {\n            showNoBooksAlert();\n            noBooksAlertShow = true;\n        }\n    }\n}\n\n//Sayfanın en alta gelip gelmediğini kontrol eder ve uyarı mesajı gösterir.\nlet scrollTimeout;\n\nfunction pageScrolledToBottom() {\n  return window.innerHeight + window.scrollY >= document.body.offsetHeight;  \n}\n\nwindow.addEventListener('scroll', function () {\n  if (scrollTimeout) {\n    clearTimeout(scrollTimeout);\n  }\n\n  scrollTimeout = setTimeout(function () {\n    scrollHandler();\n  }, 300);\n});\n"],"names":["url","response","data","cat","markup","error","BASE_URL","END_POINTS","getTopBooks","axios","getBooksByCategory","category","params","modal","btn","span","submitBtn","btnHmbrgr","signUp","event","username","email","password","opts","spinner","Spinner","spinnerPlay","containerRef","spinnerStop","showNoBooksAlert","iziToast","references","noBooksAlertShow","clickSeeMore","clickByBook","clickByAllCategories","scrollHandler","topList","html","elem","renderTopList","renderBooks","books","i","bookHtml","book","bookWrapper","bookId","titleCategory","categoryList","categoryData","words","lastWord","spanElement","allCategoriesButton","allCatBtnPosition","windowHeight","scrollTimeout"],"mappings":"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"}